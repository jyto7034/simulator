# 서버 설정
[server]
bind_address = "0.0.0.0"
port = 8080
log_level = "info" # 로그 레벨
# metrics_auth_token = "secret-token-here"  # Optional: enable for metrics endpoint auth

# 로깅 설정
[logging]
directory = "logs"
filename = "app.log"

# Redis 설정
[redis]
url = "redis://127.0.0.1:6379"
max_reconnect_attempts = 10
initial_reconnect_delay_ms = 1000
max_reconnect_delay_ms = 60000

[jwt]
secret = "your-super-secret-and-long-key-that-no-one-knows"

# 재시도 설정
[retry]
message_max_elapsed_time_ms = 500
message_initial_interval_ms = 10
message_max_interval_ms = 100

# 매치메이킹 설정
[matchmaking]
try_match_tick_interval_seconds = 5
queue_key_prefix = "queue"
queue_order_key_prefix = "queue_order"
match_fetch_request_channel_prefix = "match_fetch_req"
match_fetch_ack_channel_prefix = "match_fetch_ack"
battle_request_channel = "battle:request"
battle_result_channel_prefix = "pod"
heartbeat_interval_seconds = 30
heartbeat_timeout = 120
max_dedicated_server_retries = 5
dedicated_request_timeout_seconds = 3
allocation_token_ttl_seconds = 20
slow_loading_threshold_seconds = 15
redis_operation_timeout_seconds = 10  # Redis 작업 타임아웃 (초)
skip_game_server_check = true  # Development 환경에서는 Game Server 없이도 매칭 성공 처리

# 게임 서버 상태 문자열
[server_status]
idle = "idle"

# 게임 모드 목록 (테이블 배열)
# 각 [[matchmaking.game_modes]] 항목이 하나의 게임 모드를 정의합니다.
[[matchmaking.game_modes]]
game_mode = "Normal"        # 게임 모드
required_players = 2        # 매칭에 필요한 인원
use_mmr_matching = false    # MMR 기반 매칭 사용 여부 (일반 모드)

[[matchmaking.game_modes]]
game_mode = "Ranked"
required_players = 2
use_mmr_matching = true     # 랭크 모드에서는 이 값을 true로 설정
