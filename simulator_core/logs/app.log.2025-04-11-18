  2025-04-11T18:46:44.335373Z  INFO  Test server listening on 127.0.0.1:14220
    at tests\test.rs:121 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-11T18:46:44.335374Z  INFO  Test server listening on 127.0.0.1:14218
    at tests\test.rs:121 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-11T18:46:44.335373Z  INFO  Test server listening on 127.0.0.1:14219
    at tests\test.rs:121 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-11T18:46:44.335702Z  INFO  starting 32 workers
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\builder.rs:272 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-11T18:46:44.335702Z  INFO  starting 32 workers
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\builder.rs:272 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-11T18:46:44.335702Z  INFO  starting 32 workers
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\builder.rs:272 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-11T18:46:44.335803Z  INFO  Attempting raw WebSocket connection to ws://127.0.0.1:14219/test_heartbeat
    at tests\test.rs:196 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-11T18:46:44.336795Z  INFO  Actix runtime found; starting in Actix runtime
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:191 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-11T18:46:44.336796Z  INFO  Actix runtime found; starting in Actix runtime
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:191 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-11T18:46:44.336796Z  INFO  Actix runtime found; starting in Actix runtime
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:191 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-11T18:46:44.336827Z  INFO  starting service: "actix-web-service-127.0.0.1:14220", workers: 32, listening on: 127.0.0.1:14220
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:197 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-11T18:46:44.336830Z  INFO  starting service: "actix-web-service-127.0.0.1:14218", workers: 32, listening on: 127.0.0.1:14218
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:197 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-11T18:46:44.336831Z  INFO  starting service: "actix-web-service-127.0.0.1:14219", workers: 32, listening on: 127.0.0.1:14219
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:197 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-11T18:46:44.345148Z  INFO  [Test Handler] Handling request. Assigned player Player1 with session_id 20ef2c6c-3721-48d6-8296-cec3847b3438
    at tests\test.rs:64 on actix-rt|system:0|arbiter:1 ThreadId(8)

  2025-04-11T18:46:44.345148Z  INFO  [Test Handler] Handling request. Assigned player Player1 with session_id 7e4f9b9a-8507-4930-8e51-1be53205d13b
    at tests\test.rs:64 on actix-rt|system:2|arbiter:0 ThreadId(6)

  2025-04-11T18:46:44.345148Z  INFO  [Test Handler] Handling request. Assigned player Player1 with session_id 598f70dd-62d1-44b5-96aa-8c8f1606e54a
    at tests\test.rs:64 on actix-rt|system:1|arbiter:2 ThreadId(7)

  2025-04-11T18:46:44.345295Z  INFO  [Test Handler] WebSocket upgrade successful. Starting actor...
    at tests\test.rs:72 on actix-rt|system:2|arbiter:0 ThreadId(6)

  2025-04-11T18:46:44.345295Z  INFO  [Test Handler] WebSocket upgrade successful. Starting actor...
    at tests\test.rs:72 on actix-rt|system:0|arbiter:1 ThreadId(8)

  2025-04-11T18:46:44.345298Z  INFO  [Test Handler] WebSocket upgrade successful. Starting actor...
    at tests\test.rs:72 on actix-rt|system:1|arbiter:2 ThreadId(7)

  2025-04-11T18:46:44.345393Z  INFO  New session registered: player=Player1, endpoint=Heartbeat, session_id=32229634-7ac0-4a80-9792-e1f922c0df44
    at src\server\session.rs:68 on actix-rt|system:0|arbiter:1 ThreadId(8)

  2025-04-11T18:46:44.345393Z  INFO  New session registered: player=Player1, endpoint=Heartbeat, session_id=e40d387b-d785-4874-917f-049e6fda4ba5
    at src\server\session.rs:68 on actix-rt|system:2|arbiter:0 ThreadId(6)

  2025-04-11T18:46:44.345393Z  INFO  New session registered: player=Player1, endpoint=Heartbeat, session_id=1f095ce4-d857-45ae-9109-e4b9e1cfcfff
    at src\server\session.rs:68 on actix-rt|system:1|arbiter:2 ThreadId(7)

  2025-04-11T18:46:44.345414Z  WARN  [Test Handler] Generated session ID 20ef2c6c-3721-48d6-8296-cec3847b3438 differs from registered ID 32229634-7ac0-4a80-9792-e1f922c0df44
    at tests\test.rs:83 on actix-rt|system:0|arbiter:1 ThreadId(8)

  2025-04-11T18:46:44.345413Z  WARN  [Test Handler] Generated session ID 7e4f9b9a-8507-4930-8e51-1be53205d13b differs from registered ID e40d387b-d785-4874-917f-049e6fda4ba5
    at tests\test.rs:83 on actix-rt|system:2|arbiter:0 ThreadId(6)

  2025-04-11T18:46:44.345415Z  WARN  [Test Handler] Generated session ID 598f70dd-62d1-44b5-96aa-8c8f1606e54a differs from registered ID 1f095ce4-d857-45ae-9109-e4b9e1cfcfff
    at tests\test.rs:83 on actix-rt|system:1|arbiter:2 ThreadId(7)

  2025-04-11T18:46:44.345457Z  INFO  [Test Handler] HeartbeatActor started for player Player1 (session_id: 7e4f9b9a-8507-4930-8e51-1be53205d13b)
    at tests\test.rs:99 on actix-rt|system:2|arbiter:0 ThreadId(6)

  2025-04-11T18:46:44.345458Z  INFO  [Test Handler] HeartbeatActor started for player Player1 (session_id: 598f70dd-62d1-44b5-96aa-8c8f1606e54a)
    at tests\test.rs:99 on actix-rt|system:1|arbiter:2 ThreadId(7)

  2025-04-11T18:46:44.345457Z  INFO  [Test Handler] HeartbeatActor started for player Player1 (session_id: 20ef2c6c-3721-48d6-8296-cec3847b3438)
    at tests\test.rs:99 on actix-rt|system:0|arbiter:1 ThreadId(8)

  2025-04-11T18:46:44.345565Z  INFO  HeartbeatActor started for player Player1 (session_id: 7e4f9b9a-8507-4930-8e51-1be53205d13b)
    at src\server\ws_actor\heartbeat.rs:105 on actix-rt|system:2|arbiter:0 ThreadId(6)

  2025-04-11T18:46:44.345566Z  INFO  HeartbeatActor started for player Player1 (session_id: 20ef2c6c-3721-48d6-8296-cec3847b3438)
    at src\server\ws_actor\heartbeat.rs:105 on actix-rt|system:0|arbiter:1 ThreadId(8)

  2025-04-11T18:46:44.345567Z  INFO  HeartbeatActor started for player Player1 (session_id: 598f70dd-62d1-44b5-96aa-8c8f1606e54a)
    at src\server\ws_actor\heartbeat.rs:105 on actix-rt|system:1|arbiter:2 ThreadId(7)

  2025-04-11T18:46:44.345608Z  INFO  Connected. Consuming initial message.
    at tests\test.rs:274 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-11T18:46:44.345608Z  INFO  Connected. Consuming initial message.
    at tests\test.rs:346 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-11T18:46:44.345609Z  INFO  Raw WebSocket connection successful, response status: 101 Switching Protocols
    at tests\test.rs:200 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-11T18:46:44.345622Z  INFO  Waiting for initial message from HeartbeatActor...
    at tests\test.rs:210 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-11T18:46:44.345833Z  INFO  Received initial text message: {"player":"player1","session_id":"20ef2c6c-3721-48d6-8296-cec3847b3438","type":"heartbeat_connected"}
    at tests\test.rs:220 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-11T18:46:44.345832Z  INFO  Waiting for 15s, responding to pings...
    at tests\test.rs:282 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-11T18:46:44.345838Z  INFO  Waiting for 23s without sending Pongs...
    at tests\test.rs:352 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-11T18:46:44.345858Z  INFO  Parsed session ID: 20ef2c6c-3721-48d6-8296-cec3847b3438
    at tests\test.rs:233 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-11T18:46:49.359611Z  INFO  Received Ping, IGNORING (not sending Pong).
    at tests\test.rs:363 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-11T18:46:49.359816Z  INFO  Received Ping #1, sending Pong.
    at tests\test.rs:289 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-11T18:46:54.357044Z  INFO  Received Ping, IGNORING (not sending Pong).
    at tests\test.rs:363 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-11T18:46:54.357044Z  INFO  Received Ping #2, sending Pong.
    at tests\test.rs:289 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-11T18:46:59.357036Z ERROR  Failed to send ping to player Player1 (session_id: 20ef2c6c-3721-48d6-8296-cec3847b3438): Closed
    at src\server\ws_actor\heartbeat.rs:65 on actix-rt|system:0|arbiter:1 ThreadId(8)

  2025-04-11T18:46:59.357178Z  INFO  Received Ping, IGNORING (not sending Pong).
    at tests\test.rs:363 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-11T18:46:59.357179Z  INFO  Received Ping #3, sending Pong.
    at tests\test.rs:289 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-11T18:46:59.465435Z  INFO  Received 3 Ping messages.
    at tests\test.rs:325 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-11T18:46:59.465497Z  INFO  Keepalive wait finished. Sending test message.
    at tests\test.rs:327 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-11T18:46:59.465592Z  INFO  Successfully sent message after keepalive duration.
    at tests\test.rs:330 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-11T18:47:04.348337Z  WARN  Heartbeat timeout for player Player1 (session_id: 7e4f9b9a-8507-4930-8e51-1be53205d13b). Closing connection.
    at src\server\ws_actor\heartbeat.rs:43 on actix-rt|system:2|arbiter:0 ThreadId(6)

  2025-04-11T18:47:04.348337Z  WARN  Heartbeat timeout for player Player1 (session_id: 20ef2c6c-3721-48d6-8296-cec3847b3438). Closing connection.
    at src\server\ws_actor\heartbeat.rs:43 on actix-rt|system:0|arbiter:1 ThreadId(8)

  2025-04-11T18:47:04.348399Z  INFO  HeartbeatActor stopping for player Player1 (session_id: 7e4f9b9a-8507-4930-8e51-1be53205d13b)
    at src\server\ws_actor\heartbeat.rs:144 on actix-rt|system:2|arbiter:0 ThreadId(6)

  2025-04-11T18:47:04.348400Z  INFO  HeartbeatActor stopping for player Player1 (session_id: 20ef2c6c-3721-48d6-8296-cec3847b3438)
    at src\server\ws_actor\heartbeat.rs:144 on actix-rt|system:0|arbiter:1 ThreadId(8)

  2025-04-11T18:47:04.348417Z  INFO  HeartbeatActor stopped for player Player1 (session_id: 7e4f9b9a-8507-4930-8e51-1be53205d13b)
    at src\server\ws_actor\heartbeat.rs:153 on actix-rt|system:2|arbiter:0 ThreadId(6)

  2025-04-11T18:47:04.348417Z  INFO  HeartbeatActor stopped for player Player1 (session_id: 20ef2c6c-3721-48d6-8296-cec3847b3438)
    at src\server\ws_actor\heartbeat.rs:153 on actix-rt|system:0|arbiter:1 ThreadId(8)

  2025-04-11T18:47:04.348478Z  INFO  Attempting to end session: player=Player1, session_id=20ef2c6c-3721-48d6-8296-cec3847b3438
    at src\server\session.rs:102 on actix-rt|system:0|arbiter:1 ThreadId(8)

  2025-04-11T18:47:04.348488Z  INFO  Attempting to end session: player=Player1, session_id=7e4f9b9a-8507-4930-8e51-1be53205d13b
    at src\server\session.rs:102 on actix-rt|system:2|arbiter:0 ThreadId(6)

  2025-04-11T18:47:04.348491Z  WARN  Heartbeat timeout for player Player1 (session_id: 598f70dd-62d1-44b5-96aa-8c8f1606e54a). Closing connection.
    at src\server\ws_actor\heartbeat.rs:43 on actix-rt|system:1|arbiter:2 ThreadId(7)

  2025-04-11T18:47:04.348512Z  INFO  HeartbeatActor stopping for player Player1 (session_id: 598f70dd-62d1-44b5-96aa-8c8f1606e54a)
    at src\server\ws_actor\heartbeat.rs:144 on actix-rt|system:1|arbiter:2 ThreadId(7)

  2025-04-11T18:47:04.348513Z  WARN  Session found for player Player1, but session ID mismatch (expected 20ef2c6c-3721-48d6-8296-cec3847b3438, found 32229634-7ac0-4a80-9792-e1f922c0df44). Session not removed.
    at src\server\session.rs:120 on actix-rt|system:0|arbiter:1 ThreadId(8)

  2025-04-11T18:47:04.348528Z  INFO  HeartbeatActor stopped for player Player1 (session_id: 598f70dd-62d1-44b5-96aa-8c8f1606e54a)
    at src\server\ws_actor\heartbeat.rs:153 on actix-rt|system:1|arbiter:2 ThreadId(7)

  2025-04-11T18:47:04.348534Z  INFO  Session cleanup task completed: player=Player1, session_id=20ef2c6c-3721-48d6-8296-cec3847b3438
    at src\server\ws_actor\heartbeat.rs:93 on actix-rt|system:0|arbiter:1 ThreadId(8)

  2025-04-11T18:47:04.348563Z  INFO  Attempting to end session: player=Player1, session_id=598f70dd-62d1-44b5-96aa-8c8f1606e54a
    at src\server\session.rs:102 on actix-rt|system:1|arbiter:2 ThreadId(7)

  2025-04-11T18:47:04.348540Z  WARN  Session found for player Player1, but session ID mismatch (expected 7e4f9b9a-8507-4930-8e51-1be53205d13b, found e40d387b-d785-4874-917f-049e6fda4ba5). Session not removed.
    at src\server\session.rs:120 on actix-rt|system:2|arbiter:0 ThreadId(6)

  2025-04-11T18:47:04.348582Z  WARN  Session found for player Player1, but session ID mismatch (expected 598f70dd-62d1-44b5-96aa-8c8f1606e54a, found 1f095ce4-d857-45ae-9109-e4b9e1cfcfff). Session not removed.
    at src\server\session.rs:120 on actix-rt|system:1|arbiter:2 ThreadId(7)

  2025-04-11T18:47:04.348588Z  INFO  Session cleanup task completed: player=Player1, session_id=7e4f9b9a-8507-4930-8e51-1be53205d13b
    at src\server\ws_actor\heartbeat.rs:93 on actix-rt|system:2|arbiter:0 ThreadId(6)

  2025-04-11T18:47:04.348605Z  INFO  Session cleanup task completed: player=Player1, session_id=598f70dd-62d1-44b5-96aa-8c8f1606e54a
    at src\server\ws_actor\heartbeat.rs:93 on actix-rt|system:1|arbiter:2 ThreadId(7)

  2025-04-11T18:47:07.552244Z  INFO  Timeout wait finished.
    at tests\test.rs:396 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

