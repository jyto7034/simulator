  2025-04-13T15:09:28.851577Z  INFO  Test server listening on 127.0.0.1:8205
    at tests\test.rs:105 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-13T15:09:28.851577Z  INFO  Test server listening on 127.0.0.1:8207
    at tests\test.rs:105 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-13T15:09:28.851577Z  INFO  Test server listening on 127.0.0.1:8206
    at tests\test.rs:105 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-13T15:09:28.851759Z  INFO  starting 32 workers
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\builder.rs:272 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-13T15:09:28.851759Z  INFO  starting 32 workers
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\builder.rs:272 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-13T15:09:28.851759Z  INFO  starting 32 workers
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\builder.rs:272 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-13T15:09:28.851807Z  INFO  Attempting raw WebSocket connection to ws://127.0.0.1:8205/test_heartbeat
    at tests\test.rs:179 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-13T15:09:28.852475Z  INFO  Actix runtime found; starting in Actix runtime
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:191 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-13T15:09:28.852476Z  INFO  Actix runtime found; starting in Actix runtime
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:191 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-13T15:09:28.852475Z  INFO  Actix runtime found; starting in Actix runtime
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:191 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-13T15:09:28.852497Z  INFO  starting service: "actix-web-service-127.0.0.1:8207", workers: 32, listening on: 127.0.0.1:8207
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:197 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-13T15:09:28.852497Z  INFO  starting service: "actix-web-service-127.0.0.1:8206", workers: 32, listening on: 127.0.0.1:8206
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:197 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-13T15:09:28.852497Z  INFO  starting service: "actix-web-service-127.0.0.1:8205", workers: 32, listening on: 127.0.0.1:8205
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:197 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-13T15:09:28.860339Z  INFO  [Test Handler] Handling request. Assigned player Player1 with session_id 54dbb62b-2967-4788-8af8-cb43ae6613e7
    at tests\test.rs:48 on actix-rt|system:0|arbiter:0 ThreadId(6)

  2025-04-13T15:09:28.860339Z  INFO  [Test Handler] Handling request. Assigned player Player1 with session_id 7b7d995d-eb2e-4f9f-95e4-0e53a5e1595e
    at tests\test.rs:48 on actix-rt|system:2|arbiter:2 ThreadId(8)

  2025-04-13T15:09:28.860339Z  INFO  [Test Handler] Handling request. Assigned player Player1 with session_id 919322f8-fa11-488d-bd43-3ea80a750846
    at tests\test.rs:48 on actix-rt|system:1|arbiter:1 ThreadId(7)

  2025-04-13T15:09:28.860430Z  INFO  [Test Handler] WebSocket upgrade successful. Starting actor...
    at tests\test.rs:56 on actix-rt|system:2|arbiter:2 ThreadId(8)

  2025-04-13T15:09:28.860430Z  INFO  [Test Handler] WebSocket upgrade successful. Starting actor...
    at tests\test.rs:56 on actix-rt|system:1|arbiter:1 ThreadId(7)

  2025-04-13T15:09:28.860432Z  INFO  [Test Handler] WebSocket upgrade successful. Starting actor...
    at tests\test.rs:56 on actix-rt|system:0|arbiter:0 ThreadId(6)

  2025-04-13T15:09:28.860485Z  INFO  New session registered: player=Player1, endpoint=Heartbeat, session_id=3f9a29f3-2be1-4782-a5ee-762cc9895acc
    at src\server\session.rs:68 on actix-rt|system:2|arbiter:2 ThreadId(8)

  2025-04-13T15:09:28.860485Z  INFO  New session registered: player=Player1, endpoint=Heartbeat, session_id=c53051ce-94f4-47df-931d-7b0706af9080
    at src\server\session.rs:68 on actix-rt|system:0|arbiter:0 ThreadId(6)

  2025-04-13T15:09:28.860486Z  INFO  New session registered: player=Player1, endpoint=Heartbeat, session_id=d904a171-928b-4d7b-b747-934fd750b72e
    at src\server\session.rs:68 on actix-rt|system:1|arbiter:1 ThreadId(7)

  2025-04-13T15:09:28.860497Z  WARN  [Test Handler] Generated session ID 54dbb62b-2967-4788-8af8-cb43ae6613e7 differs from registered ID c53051ce-94f4-47df-931d-7b0706af9080
    at tests\test.rs:67 on actix-rt|system:0|arbiter:0 ThreadId(6)

  2025-04-13T15:09:28.860497Z  WARN  [Test Handler] Generated session ID 919322f8-fa11-488d-bd43-3ea80a750846 differs from registered ID d904a171-928b-4d7b-b747-934fd750b72e
    at tests\test.rs:67 on actix-rt|system:1|arbiter:1 ThreadId(7)

  2025-04-13T15:09:28.860497Z  WARN  [Test Handler] Generated session ID 7b7d995d-eb2e-4f9f-95e4-0e53a5e1595e differs from registered ID 3f9a29f3-2be1-4782-a5ee-762cc9895acc
    at tests\test.rs:67 on actix-rt|system:2|arbiter:2 ThreadId(8)

  2025-04-13T15:09:28.860520Z  INFO  [Test Handler] HeartbeatActor started for player Player1 (session_id: 7b7d995d-eb2e-4f9f-95e4-0e53a5e1595e)
    at tests\test.rs:83 on actix-rt|system:2|arbiter:2 ThreadId(8)

  2025-04-13T15:09:28.860522Z  INFO  [Test Handler] HeartbeatActor started for player Player1 (session_id: 919322f8-fa11-488d-bd43-3ea80a750846)
    at tests\test.rs:83 on actix-rt|system:1|arbiter:1 ThreadId(7)

  2025-04-13T15:09:28.860523Z  INFO  [Test Handler] HeartbeatActor started for player Player1 (session_id: 54dbb62b-2967-4788-8af8-cb43ae6613e7)
    at tests\test.rs:83 on actix-rt|system:0|arbiter:0 ThreadId(6)

  2025-04-13T15:09:28.860596Z  INFO  HeartbeatActor started for player Player1 (session_id: 919322f8-fa11-488d-bd43-3ea80a750846)
    at src\server\ws_actor\heartbeat.rs:101 on actix-rt|system:1|arbiter:1 ThreadId(7)

  2025-04-13T15:09:28.860596Z  INFO  HeartbeatActor started for player Player1 (session_id: 7b7d995d-eb2e-4f9f-95e4-0e53a5e1595e)
    at src\server\ws_actor\heartbeat.rs:101 on actix-rt|system:2|arbiter:2 ThreadId(8)

  2025-04-13T15:09:28.860596Z  INFO  HeartbeatActor started for player Player1 (session_id: 54dbb62b-2967-4788-8af8-cb43ae6613e7)
    at src\server\ws_actor\heartbeat.rs:101 on actix-rt|system:0|arbiter:0 ThreadId(6)

  2025-04-13T15:09:28.860634Z  INFO  Raw WebSocket connection successful, response status: 101 Switching Protocols
    at tests\test.rs:183 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-13T15:09:28.860636Z  INFO  Connected. Consuming initial message.
    at tests\test.rs:329 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-13T15:09:28.860640Z  INFO  Connected. Consuming initial message.
    at tests\test.rs:257 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-13T15:09:28.860648Z  INFO  Waiting for initial message from HeartbeatActor...
    at tests\test.rs:193 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-13T15:09:28.860760Z  INFO  Waiting for 23s without sending Pongs...
    at tests\test.rs:335 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-13T15:09:28.860767Z  INFO  Waiting for 15s, responding to pings...
    at tests\test.rs:265 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-13T15:09:28.860774Z  INFO  Received initial text message: {"player":"player1","session_id":"7b7d995d-eb2e-4f9f-95e4-0e53a5e1595e","type":"heartbeat_connected"}
    at tests\test.rs:203 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-13T15:09:28.860794Z  INFO  Parsed session ID: 7b7d995d-eb2e-4f9f-95e4-0e53a5e1595e
    at tests\test.rs:216 on heartbeat_actor_direct_tests::test_heartbeat_actor_connect_and_initial_message ThreadId(3)

  2025-04-13T15:09:33.863380Z  INFO  Received Ping, IGNORING (not sending Pong).
    at tests\test.rs:346 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-13T15:09:33.863380Z  INFO  Received Ping #1, sending Pong.
    at tests\test.rs:272 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-13T15:09:38.868435Z  INFO  Received Ping #2, sending Pong.
    at tests\test.rs:272 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-13T15:09:38.868448Z  INFO  Received Ping, IGNORING (not sending Pong).
    at tests\test.rs:346 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-13T15:09:43.868717Z ERROR  Failed to send ping to player Player1 (session_id: 7b7d995d-eb2e-4f9f-95e4-0e53a5e1595e): Closed
    at src\server\ws_actor\heartbeat.rs:64 on actix-rt|system:2|arbiter:2 ThreadId(8)

  2025-04-13T15:09:43.868876Z  INFO  Received Ping, IGNORING (not sending Pong).
    at tests\test.rs:346 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

  2025-04-13T15:09:43.868876Z  INFO  Received Ping #3, sending Pong.
    at tests\test.rs:272 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-13T15:09:43.977475Z  INFO  Received 3 Ping messages.
    at tests\test.rs:308 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-13T15:09:43.977536Z  INFO  Keepalive wait finished. Sending test message.
    at tests\test.rs:310 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-13T15:09:43.977619Z  INFO  Successfully sent message after keepalive duration.
    at tests\test.rs:313 on heartbeat_actor_direct_tests::test_heartbeat_actor_ping_pong_keepalive ThreadId(4)

  2025-04-13T15:09:48.874692Z  WARN  Heartbeat timeout for player Player1 (session_id: 7b7d995d-eb2e-4f9f-95e4-0e53a5e1595e). Closing connection.
    at src\server\ws_actor\heartbeat.rs:43 on actix-rt|system:2|arbiter:2 ThreadId(8)

  2025-04-13T15:09:48.874740Z  INFO  HeartbeatActor stopping for player Player1 (session_id: 7b7d995d-eb2e-4f9f-95e4-0e53a5e1595e)
    at src\server\ws_actor\heartbeat.rs:138 on actix-rt|system:2|arbiter:2 ThreadId(8)

  2025-04-13T15:09:48.874757Z  INFO  HeartbeatActor stopped for player Player1 (session_id: 7b7d995d-eb2e-4f9f-95e4-0e53a5e1595e)
    at src\server\ws_actor\heartbeat.rs:147 on actix-rt|system:2|arbiter:2 ThreadId(8)

  2025-04-13T15:09:48.874805Z  INFO  Attempting to end session: player=Player1, session_id=7b7d995d-eb2e-4f9f-95e4-0e53a5e1595e
    at src\server\session.rs:102 on actix-rt|system:2|arbiter:2 ThreadId(8)

  2025-04-13T15:09:48.874832Z  WARN  Session found for player Player1, but session ID mismatch (expected 7b7d995d-eb2e-4f9f-95e4-0e53a5e1595e, found 3f9a29f3-2be1-4782-a5ee-762cc9895acc). Session not removed.
    at src\server\session.rs:120 on actix-rt|system:2|arbiter:2 ThreadId(8)

  2025-04-13T15:09:48.874850Z  INFO  Session cleanup task completed: player=Player1, session_id=7b7d995d-eb2e-4f9f-95e4-0e53a5e1595e
    at src\server\ws_actor\heartbeat.rs:90 on actix-rt|system:2|arbiter:2 ThreadId(8)

  2025-04-13T15:09:48.874896Z  WARN  Heartbeat timeout for player Player1 (session_id: 54dbb62b-2967-4788-8af8-cb43ae6613e7). Closing connection.
    at src\server\ws_actor\heartbeat.rs:43 on actix-rt|system:0|arbiter:0 ThreadId(6)

  2025-04-13T15:09:48.874899Z  WARN  Heartbeat timeout for player Player1 (session_id: 919322f8-fa11-488d-bd43-3ea80a750846). Closing connection.
    at src\server\ws_actor\heartbeat.rs:43 on actix-rt|system:1|arbiter:1 ThreadId(7)

  2025-04-13T15:09:48.874927Z  INFO  HeartbeatActor stopping for player Player1 (session_id: 54dbb62b-2967-4788-8af8-cb43ae6613e7)
    at src\server\ws_actor\heartbeat.rs:138 on actix-rt|system:0|arbiter:0 ThreadId(6)

  2025-04-13T15:09:48.874939Z  INFO  HeartbeatActor stopped for player Player1 (session_id: 54dbb62b-2967-4788-8af8-cb43ae6613e7)
    at src\server\ws_actor\heartbeat.rs:147 on actix-rt|system:0|arbiter:0 ThreadId(6)

  2025-04-13T15:09:48.874937Z  INFO  HeartbeatActor stopping for player Player1 (session_id: 919322f8-fa11-488d-bd43-3ea80a750846)
    at src\server\ws_actor\heartbeat.rs:138 on actix-rt|system:1|arbiter:1 ThreadId(7)

  2025-04-13T15:09:48.874950Z  INFO  HeartbeatActor stopped for player Player1 (session_id: 919322f8-fa11-488d-bd43-3ea80a750846)
    at src\server\ws_actor\heartbeat.rs:147 on actix-rt|system:1|arbiter:1 ThreadId(7)

  2025-04-13T15:09:48.874977Z  INFO  Attempting to end session: player=Player1, session_id=54dbb62b-2967-4788-8af8-cb43ae6613e7
    at src\server\session.rs:102 on actix-rt|system:0|arbiter:0 ThreadId(6)

  2025-04-13T15:09:48.874985Z  INFO  Attempting to end session: player=Player1, session_id=919322f8-fa11-488d-bd43-3ea80a750846
    at src\server\session.rs:102 on actix-rt|system:1|arbiter:1 ThreadId(7)

  2025-04-13T15:09:48.874991Z  WARN  Session found for player Player1, but session ID mismatch (expected 54dbb62b-2967-4788-8af8-cb43ae6613e7, found c53051ce-94f4-47df-931d-7b0706af9080). Session not removed.
    at src\server\session.rs:120 on actix-rt|system:0|arbiter:0 ThreadId(6)

  2025-04-13T15:09:48.875001Z  INFO  Session cleanup task completed: player=Player1, session_id=54dbb62b-2967-4788-8af8-cb43ae6613e7
    at src\server\ws_actor\heartbeat.rs:90 on actix-rt|system:0|arbiter:0 ThreadId(6)

  2025-04-13T15:09:48.874998Z  WARN  Session found for player Player1, but session ID mismatch (expected 919322f8-fa11-488d-bd43-3ea80a750846, found d904a171-928b-4d7b-b747-934fd750b72e). Session not removed.
    at src\server\session.rs:120 on actix-rt|system:1|arbiter:1 ThreadId(7)

  2025-04-13T15:09:48.875010Z  INFO  Session cleanup task completed: player=Player1, session_id=919322f8-fa11-488d-bd43-3ea80a750846
    at src\server\ws_actor\heartbeat.rs:90 on actix-rt|system:1|arbiter:1 ThreadId(7)

  2025-04-13T15:09:52.084923Z  INFO  Timeout wait finished.
    at tests\test.rs:379 on heartbeat_actor_direct_tests::test_heartbeat_actor_timeout_without_pong ThreadId(5)

