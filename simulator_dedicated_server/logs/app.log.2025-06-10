  2025-06-10T11:51:27.090181Z  INFO  로거 초기화 완료: 콘솔 및 파일(logs/app.log) 출력 활성화.
    at simulator_core\src\lib.rs:71 on ThreadId(2)

  2025-06-10T11:51:27.131870Z  INFO  로거 초기화 완료: 콘솔 및 파일(logs/app.log) 출력 활성화.
    at simulator_core\src\lib.rs:71 on ThreadId(2)

  2025-06-10T11:51:27.136555Z  INFO  starting 32 workers
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\builder.rs:272 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:27.136720Z  INFO  PlayerActor 1 connected ( not session connection! ), P1 can now receive messages.
    at simulator_core\src\game\mod.rs:203 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:27.136728Z  INFO  PlayerActor 2 connected ( not session connection! ), P2 can now receive messages.
    at simulator_core\src\game\mod.rs:210 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:27.136732Z  INFO  Both players actor connected. ( not session connection! ) Sending SetOpponent messages.
    at simulator_core\src\game\mod.rs:214 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:27.136799Z  INFO  Actix runtime found; starting in Actix runtime
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:191 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:27.136815Z  INFO  starting service: "actix-web-service-127.0.0.1:9711", workers: 32, listening on: 127.0.0.1:9711
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:197 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:27.145920Z  INFO  멀리건 단계 핸들러 시작: player=Player1
    at simulator_dedicated_server\src\server\mod.rs:115 on actix-rt|system:0|arbiter:0 ThreadId(4)
    in game with player: AuthPlayer { ptype: Player1, id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3 }, player_type: Player1

  2025-06-10T11:51:27.146006Z  INFO  WebSocket handshake successful for player_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3
    at simulator_dedicated_server\src\server\mod.rs:125 on actix-rt|system:0|arbiter:0 ThreadId(4)
    in game with player: AuthPlayer { ptype: Player1, id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3 }, player_type: Player1

  2025-06-10T11:51:27.146125Z  INFO  ConnectionActor started for player Player1 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3
    at simulator_dedicated_server\src\connection\connection.rs:148 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:27.146206Z  INFO  Sent initial heartbeat_connected message to player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3)
    at simulator_dedicated_server\src\connection\connection.rs:171 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:27.146270Z  INFO  [TEST] Received message: {"player":"Player1","session_id":"7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3","type":"heartbeat_connected"}
    at simulator_dedicated_server\src\test\mod.rs:239 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:32.151155Z  INFO  Spawning heartbeat ping task for player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3)
    at simulator_dedicated_server\src\connection\connection.rs:87 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:32.151247Z  INFO  Ping sent successfully to player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3) last_pong Instant { t: 149541.4636989s }
    at simulator_dedicated_server\src\connection\connection.rs:107 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:32.151442Z  INFO  [TEST] Received ping (auto-pong by tungstenite), ignoring.
    at simulator_dedicated_server\src\test\mod.rs:249 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:32.151618Z  INFO  ConnectionActor for player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3): Received Pong from client
    at simulator_dedicated_server\src\connection\connection.rs:254 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:32.151636Z  INFO  ConnectionActor for player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3): Initial Pong received. Registering with GameActor.
    at simulator_dedicated_server\src\connection\connection.rs:262 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:32.151709Z  INFO  GAME ACTOR [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Handling RegisterConnection for player 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3
    at simulator_core\src\game\msg\connection.rs:38 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:32.151764Z  INFO  GAME ACTOR [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Connection for player 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3 registered successfully. Total connections: 1
    at simulator_core\src\game\msg\connection.rs:82 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:32.151776Z  INFO  GAME ACTOR [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Game state locked for player 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3
    at simulator_core\src\game\msg\connection.rs:93 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:32.151786Z  INFO  Player Player1 added to game state as Connected
    at simulator_core\src\game\state.rs:83 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:32.151791Z  INFO  GAME ACTOR [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Player 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3 connection status updated in GameStateManager.
    at simulator_core\src\game\msg\connection.rs:99 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:32.151802Z  INFO  GAME ACTOR [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Player 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3 connected, but not all players are ready. Waiting for others.
    at simulator_core\src\game\msg\connection.rs:208 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:32.151831Z  INFO  Starting opponent wait timer for first player: Player2
    at simulator_core\src\game\msg\connection.rs:233 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:32.151852Z  INFO  ConnectionActor for player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3): Successfully registered with GameActor.
    at simulator_dedicated_server\src\connection\connection.rs:318 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:37.153851Z  INFO  Spawning heartbeat ping task for player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3)
    at simulator_dedicated_server\src\connection\connection.rs:87 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:37.153951Z  INFO  Ping sent successfully to player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3) last_pong Instant { t: 149546.4692833s }
    at simulator_dedicated_server\src\connection\connection.rs:107 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:37.154151Z  INFO  [TEST] Received ping (auto-pong by tungstenite), ignoring.
    at simulator_dedicated_server\src\test\mod.rs:249 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:37.154311Z  INFO  ConnectionActor for player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3): Received Pong from client
    at simulator_dedicated_server\src\connection\connection.rs:254 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:42.153863Z  INFO  Spawning heartbeat ping task for player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3)
    at simulator_dedicated_server\src\connection\connection.rs:87 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:42.153950Z  INFO  Ping sent successfully to player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3) last_pong Instant { t: 149551.4719832s }
    at simulator_dedicated_server\src\connection\connection.rs:107 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:42.154132Z  INFO  [TEST] Received ping (auto-pong by tungstenite), ignoring.
    at simulator_dedicated_server\src\test\mod.rs:249 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:42.154282Z  INFO  ConnectionActor for player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3): Received Pong from client
    at simulator_dedicated_server\src\connection\connection.rs:254 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:47.150059Z  INFO  Spawning heartbeat ping task for player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3)
    at simulator_dedicated_server\src\connection\connection.rs:87 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:47.150145Z  INFO  Ping sent successfully to player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3) last_pong Instant { t: 149556.4719537s }
    at simulator_dedicated_server\src\connection\connection.rs:107 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:47.150338Z  INFO  [TEST] Received ping (auto-pong by tungstenite), ignoring.
    at simulator_dedicated_server\src\test\mod.rs:249 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:47.150499Z  INFO  ConnectionActor for player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3): Received Pong from client
    at simulator_dedicated_server\src\connection\connection.rs:254 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:52.161075Z  INFO  Spawning heartbeat ping task for player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3)
    at simulator_dedicated_server\src\connection\connection.rs:87 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:52.161150Z  INFO  Ping sent successfully to player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3) last_pong Instant { t: 149561.4681715s }
    at simulator_dedicated_server\src\connection\connection.rs:107 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:52.161295Z  INFO  [TEST] Received ping (auto-pong by tungstenite), ignoring.
    at simulator_dedicated_server\src\test\mod.rs:249 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:51:52.161388Z  INFO  ConnectionActor for player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3): Received Pong from client
    at simulator_dedicated_server\src\connection\connection.rs:254 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:57.147992Z  INFO  Spawning heartbeat ping task for player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3)
    at simulator_dedicated_server\src\connection\connection.rs:87 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:51:57.148095Z  INFO  Ping sent successfully to player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3) last_pong Instant { t: 149566.4790604s }
    at simulator_dedicated_server\src\connection\connection.rs:107 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:52:02.153249Z  WARN  GAME ACTOR [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Opponent wait timeout for player Player2. Aborting game.
    at simulator_core\src\game\msg\connection.rs:248 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.153240Z  INFO  Spawning heartbeat ping task for player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3)
    at simulator_dedicated_server\src\connection\connection.rs:87 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:52:02.153338Z ERROR  Failed to send ping to player Player1 (session_id: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3): Closed
    at simulator_dedicated_server\src\connection\connection.rs:101 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:52:02.153329Z  INFO  Game phase transitioning from Initial to Aborted
    at simulator_core\src\game\state.rs:128 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.153362Z  INFO  Cancelling heartbeat for player: Player1
    at simulator_dedicated_server\src\connection\messages.rs:24 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:52:02.153372Z  INFO  GameActor [2541a8bf-b9fb-4853-9d4a-c6d903787ab8] is stopping. Initiating comprehensive cleanup.
    at simulator_core\src\game\mod.rs:70 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.153388Z  INFO  Heartbeat cancelled successfully for player: 7e5cb93c-7a2f-4a9e-bc9d-6d7f7ae840c3
    at simulator_dedicated_server\src\connection\messages.rs:27 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T11:52:02.153398Z  INFO  GameActor [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: stopping() method finished, comprehensive cleanup scheduled.
    at simulator_core\src\game\mod.rs:152 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.153408Z  INFO  GameActor [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Starting comprehensive cleanup task.
    at simulator_core\src\game\mod.rs:82 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.153422Z  INFO  Player Player1 removed from game state
    at simulator_core\src\game\state.rs:90 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.153426Z  INFO  GameActor [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: All players removed from GameStateManager.
    at simulator_core\src\game\mod.rs:94 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.153438Z  INFO  GameActor [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: All connections cleared.
    at simulator_core\src\game\mod.rs:104 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.153443Z  INFO  GameActor [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Preparing to send GameOver to PlayerActor (Addr { tx: AddressSender { sender_task: Mutex { data: SenderTask { task: None, is_parked: false } }, maybe_parked: false } }).
    at simulator_core\src\game\mod.rs:113 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.153463Z  INFO  GameActor [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Preparing to send GameOver to PlayerActor (Addr { tx: AddressSender { sender_task: Mutex { data: SenderTask { task: None, is_parked: false } }, maybe_parked: false } }).
    at simulator_core\src\game\mod.rs:113 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.153487Z  INFO  PLAYER ACTOR [Player2]: Handling GameOver
    at simulator_core\src\player\message.rs:91 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.153544Z  INFO  PLAYER ACTOR [Player1]: Handling GameOver
    at simulator_core\src\player\message.rs:91 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.153592Z  INFO  GameActor [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Successfully sent GameOver to PlayerActor (Addr { tx: AddressSender { sender_task: Mutex { data: SenderTask { task: None, is_parked: false } }, maybe_parked: false } })
    at simulator_core\src\game\mod.rs:120 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.153599Z  INFO  GameActor [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Successfully sent GameOver to PlayerActor (Addr { tx: AddressSender { sender_task: Mutex { data: SenderTask { task: None, is_parked: false } }, maybe_parked: false } })
    at simulator_core\src\game\mod.rs:120 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.153605Z  INFO  GameActor [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Comprehensive cleanup task completed.
    at simulator_core\src\game\mod.rs:134 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.153608Z  INFO  GameActor [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: All cleanup completed.
    at simulator_core\src\game\mod.rs:142 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:02.154390Z  INFO  멀리건 단계 핸들러 시작: player=Player2
    at simulator_dedicated_server\src\server\mod.rs:115 on actix-rt|system:0|arbiter:1 ThreadId(5)
    in game with player: AuthPlayer { ptype: Player2, id: 1877dd41-6d65-45b8-a3ec-1a63a6bac120 }, player_type: Player2

  2025-06-10T11:52:02.154436Z  INFO  WebSocket handshake successful for player_id: 1877dd41-6d65-45b8-a3ec-1a63a6bac120
    at simulator_dedicated_server\src\server\mod.rs:125 on actix-rt|system:0|arbiter:1 ThreadId(5)
    in game with player: AuthPlayer { ptype: Player2, id: 1877dd41-6d65-45b8-a3ec-1a63a6bac120 }, player_type: Player2

  2025-06-10T11:52:02.154512Z  INFO  ConnectionActor started for player Player2 1877dd41-6d65-45b8-a3ec-1a63a6bac120
    at simulator_dedicated_server\src\connection\connection.rs:148 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:02.154554Z  INFO  Sent initial heartbeat_connected message to player Player2 (session_id: 1877dd41-6d65-45b8-a3ec-1a63a6bac120)
    at simulator_dedicated_server\src\connection\connection.rs:171 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:02.154603Z  INFO  [TEST] Received message: {"player":"Player2","session_id":"1877dd41-6d65-45b8-a3ec-1a63a6bac120","type":"heartbeat_connected"}
    at simulator_dedicated_server\src\test\mod.rs:239 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:07.164493Z  INFO  Spawning heartbeat ping task for player Player2 (session_id: 1877dd41-6d65-45b8-a3ec-1a63a6bac120)
    at simulator_dedicated_server\src\connection\connection.rs:87 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:07.164568Z  INFO  Ping sent successfully to player Player2 (session_id: 1877dd41-6d65-45b8-a3ec-1a63a6bac120) last_pong Instant { t: 149576.4721231s }
    at simulator_dedicated_server\src\connection\connection.rs:107 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:07.164744Z  INFO  [TEST] Received ping (auto-pong by tungstenite), ignoring.
    at simulator_dedicated_server\src\test\mod.rs:249 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:07.164837Z  INFO  ConnectionActor for player Player2 (session_id: 1877dd41-6d65-45b8-a3ec-1a63a6bac120): Received Pong from client
    at simulator_dedicated_server\src\connection\connection.rs:254 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:07.164850Z  INFO  ConnectionActor for player Player2 (session_id: 1877dd41-6d65-45b8-a3ec-1a63a6bac120): Initial Pong received. Registering with GameActor.
    at simulator_dedicated_server\src\connection\connection.rs:262 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:07.164888Z  INFO  GAME ACTOR [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Handling RegisterConnection for player 1877dd41-6d65-45b8-a3ec-1a63a6bac120
    at simulator_core\src\game\msg\connection.rs:38 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:07.164925Z  INFO  GAME ACTOR [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Game is already aborted. Rejecting connection for player 1877dd41-6d65-45b8-a3ec-1a63a6bac120.
    at simulator_core\src\game\msg\connection.rs:62 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:07.164972Z ERROR  ConnectionActor for player Player2 (session_id: 1877dd41-6d65-45b8-a3ec-1a63a6bac120): Message sent to GameActor, but registration failed with GameError: GameAlreadyAborted
    at simulator_dedicated_server\src\connection\connection.rs:288 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:07.164999Z  WARN  RegisterConnection failed on attempt 1/3. Error: GameAlreadyAborted. Retrying...
    at simulator_core\src\lib.rs:252 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:07.273953Z  INFO  GAME ACTOR [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Handling RegisterConnection for player 1877dd41-6d65-45b8-a3ec-1a63a6bac120
    at simulator_core\src\game\msg\connection.rs:38 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:07.274035Z  INFO  GAME ACTOR [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Game is already aborted. Rejecting connection for player 1877dd41-6d65-45b8-a3ec-1a63a6bac120.
    at simulator_core\src\game\msg\connection.rs:62 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:07.274079Z ERROR  ConnectionActor for player Player2 (session_id: 1877dd41-6d65-45b8-a3ec-1a63a6bac120): Message sent to GameActor, but registration failed with GameError: GameAlreadyAborted
    at simulator_dedicated_server\src\connection\connection.rs:288 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:07.274100Z  WARN  RegisterConnection failed on attempt 2/3. Error: GameAlreadyAborted. Retrying...
    at simulator_core\src\lib.rs:252 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:07.489743Z  INFO  GAME ACTOR [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Handling RegisterConnection for player 1877dd41-6d65-45b8-a3ec-1a63a6bac120
    at simulator_core\src\game\msg\connection.rs:38 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:07.489818Z  INFO  GAME ACTOR [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: Game is already aborted. Rejecting connection for player 1877dd41-6d65-45b8-a3ec-1a63a6bac120.
    at simulator_core\src\game\msg\connection.rs:62 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T11:52:07.489875Z ERROR  ConnectionActor for player Player2 (session_id: 1877dd41-6d65-45b8-a3ec-1a63a6bac120): Message sent to GameActor, but registration failed with GameError: GameAlreadyAborted
    at simulator_dedicated_server\src\connection\connection.rs:288 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:07.489902Z ERROR  RegisterConnection failed after 3 attempts. Final error: GameAlreadyAborted
    at simulator_core\src\lib.rs:245 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:07.489909Z ERROR  ConnectionActor for player Player2 (session_id: 1877dd41-6d65-45b8-a3ec-1a63a6bac120): Failed to register with GameActor after retries: GameAlreadyAborted
    at simulator_dedicated_server\src\connection\connection.rs:310 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:07.489939Z  INFO  Stopping ConnectionActor for player: 1877dd41-6d65-45b8-a3ec-1a63a6bac120 due to error: RetryFailed
    at simulator_dedicated_server\src\connection\messages.rs:49 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:07.489946Z  INFO  ConnectionActor stopping for player Player2 (session_id: 1877dd41-6d65-45b8-a3ec-1a63a6bac120)
    at simulator_dedicated_server\src\connection\connection.rs:183 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:07.489956Z  INFO  Heartbeat task cancelled for player Player2 (session_id: 1877dd41-6d65-45b8-a3ec-1a63a6bac120)
    at simulator_dedicated_server\src\connection\connection.rs:190 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:07.489981Z  INFO  Session cleanup task completed: player=Player2, session_id=1877dd41-6d65-45b8-a3ec-1a63a6bac120
    at simulator_dedicated_server\src\connection\connection.rs:135 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T11:52:07.490414Z  INFO  GameActor [2541a8bf-b9fb-4853-9d4a-c6d903787ab8]: stopping() called again, but cleanup is already in progress. Ignoring.
    at simulator_core\src\game\mod.rs:60 on mulligan::test_mulligan_deal_cards_one_player_delayed ThreadId(3)

  2025-06-10T12:13:45.665779Z  INFO  로거 초기화 완료: 콘솔 및 파일(logs/app.log) 출력 활성화.
    at simulator_core\src\lib.rs:71 on ThreadId(2)

  2025-06-10T12:13:45.702094Z  INFO  로거 초기화 완료: 콘솔 및 파일(logs/app.log) 출력 활성화.
    at simulator_core\src\lib.rs:71 on ThreadId(2)

  2025-06-10T12:13:45.706901Z  INFO  starting 32 workers
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\builder.rs:272 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:13:45.707108Z  INFO  PlayerActor 1 connected ( not session connection! ), P1 can now receive messages.
    at simulator_core\src\game\mod.rs:203 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:13:45.707120Z  INFO  PlayerActor 2 connected ( not session connection! ), P2 can now receive messages.
    at simulator_core\src\game\mod.rs:210 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:13:45.707123Z  INFO  Both players actor connected. ( not session connection! ) Sending SetOpponent messages.
    at simulator_core\src\game\mod.rs:214 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:13:45.707205Z  INFO  Actix runtime found; starting in Actix runtime
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:191 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:13:45.707222Z  INFO  starting service: "actix-web-service-127.0.0.1:10070", workers: 32, listening on: 127.0.0.1:10070
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:197 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:15:33.652230Z  INFO  로거 초기화 완료: 콘솔 및 파일(logs/app.log) 출력 활성화.
    at simulator_core\src\lib.rs:71 on ThreadId(2)

  2025-06-10T12:15:33.676756Z  INFO  로거 초기화 완료: 콘솔 및 파일(logs/app.log) 출력 활성화.
    at simulator_core\src\lib.rs:71 on ThreadId(2)

  2025-06-10T12:15:33.681087Z  INFO  starting 32 workers
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\builder.rs:272 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:15:33.681287Z  INFO  PlayerActor 1 connected ( not session connection! ), P1 can now receive messages.
    at simulator_core\src\game\mod.rs:203 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:15:33.681303Z  INFO  PlayerActor 2 connected ( not session connection! ), P2 can now receive messages.
    at simulator_core\src\game\mod.rs:210 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:15:33.681307Z  INFO  Both players actor connected. ( not session connection! ) Sending SetOpponent messages.
    at simulator_core\src\game\mod.rs:214 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:15:33.681515Z  INFO  Actix runtime found; starting in Actix runtime
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:191 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:15:33.681539Z  INFO  starting service: "actix-web-service-127.0.0.1:10088", workers: 32, listening on: 127.0.0.1:10088
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:197 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:12.802835Z  INFO  로거 초기화 완료: 콘솔 및 파일(logs/app.log) 출력 활성화.
    at simulator_core\src\lib.rs:71 on ThreadId(2)

  2025-06-10T12:22:12.831157Z  INFO  로거 초기화 완료: 콘솔 및 파일(logs/app.log) 출력 활성화.
    at simulator_core\src\lib.rs:71 on ThreadId(2)

  2025-06-10T12:22:12.836474Z  INFO  starting 32 workers
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\builder.rs:272 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:12.836790Z  INFO  PlayerActor 1 connected ( not session connection! ), P1 can now receive messages.
    at simulator_core\src\game\mod.rs:203 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:12.836807Z  INFO  PlayerActor 2 connected ( not session connection! ), P2 can now receive messages.
    at simulator_core\src\game\mod.rs:210 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:12.836811Z  INFO  Both players actor connected. ( not session connection! ) Sending SetOpponent messages.
    at simulator_core\src\game\mod.rs:214 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:12.837096Z  INFO  Actix runtime found; starting in Actix runtime
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:191 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:12.837130Z  INFO  starting service: "actix-web-service-127.0.0.1:10179", workers: 32, listening on: 127.0.0.1:10179
    at C:\Users\blast\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\actix-server-2.5.0\src\server.rs:197 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:12.847205Z  INFO  멀리건 단계 핸들러 시작: player=Player1
    at simulator_dedicated_server\src\server\mod.rs:115 on actix-rt|system:0|arbiter:1 ThreadId(5)
    in game with player: AuthPlayer { ptype: Player1, id: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9 }, player_type: Player1

  2025-06-10T12:22:12.847221Z  INFO  멀리건 단계 핸들러 시작: player=Player2
    at simulator_dedicated_server\src\server\mod.rs:115 on actix-rt|system:0|arbiter:0 ThreadId(4)
    in game with player: AuthPlayer { ptype: Player2, id: e0159fea-dd83-4966-974a-6da069c0e3aa }, player_type: Player2

  2025-06-10T12:22:12.847341Z  INFO  WebSocket handshake successful for player_id: e0159fea-dd83-4966-974a-6da069c0e3aa
    at simulator_dedicated_server\src\server\mod.rs:125 on actix-rt|system:0|arbiter:0 ThreadId(4)
    in game with player: AuthPlayer { ptype: Player2, id: e0159fea-dd83-4966-974a-6da069c0e3aa }, player_type: Player2

  2025-06-10T12:22:12.847343Z  INFO  WebSocket handshake successful for player_id: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9
    at simulator_dedicated_server\src\server\mod.rs:125 on actix-rt|system:0|arbiter:1 ThreadId(5)
    in game with player: AuthPlayer { ptype: Player1, id: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9 }, player_type: Player1

  2025-06-10T12:22:12.847487Z  INFO  ConnectionActor started for player Player2 e0159fea-dd83-4966-974a-6da069c0e3aa
    at simulator_dedicated_server\src\connection\connection.rs:148 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T12:22:12.847503Z  INFO  ConnectionActor started for player Player1 ce7ac098-b8b1-40c6-9ed7-ecffb17257e9
    at simulator_dedicated_server\src\connection\connection.rs:148 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T12:22:12.847604Z  INFO  Sent initial heartbeat_connected message to player Player2 (session_id: e0159fea-dd83-4966-974a-6da069c0e3aa)
    at simulator_dedicated_server\src\connection\connection.rs:171 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T12:22:12.847607Z  INFO  Sent initial heartbeat_connected message to player Player1 (session_id: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9)
    at simulator_dedicated_server\src\connection\connection.rs:171 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T12:22:12.847788Z  INFO  [TEST] Received message: {"player":"Player1","session_id":"ce7ac098-b8b1-40c6-9ed7-ecffb17257e9","type":"heartbeat_connected"}
    at simulator_dedicated_server\src\test\mod.rs:239 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:12.847990Z  INFO  [TEST] Received message: {"player":"Player2","session_id":"e0159fea-dd83-4966-974a-6da069c0e3aa","type":"heartbeat_connected"}
    at simulator_dedicated_server\src\test\mod.rs:239 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854188Z  INFO  Spawning heartbeat ping task for player Player1 (session_id: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9)
    at simulator_dedicated_server\src\connection\connection.rs:87 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T12:22:17.854198Z  INFO  Spawning heartbeat ping task for player Player2 (session_id: e0159fea-dd83-4966-974a-6da069c0e3aa)
    at simulator_dedicated_server\src\connection\connection.rs:87 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T12:22:17.854287Z  INFO  Ping sent successfully to player Player1 (session_id: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9) last_pong Instant { t: 151387.1650514s }
    at simulator_dedicated_server\src\connection\connection.rs:107 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T12:22:17.854289Z  INFO  Ping sent successfully to player Player2 (session_id: e0159fea-dd83-4966-974a-6da069c0e3aa) last_pong Instant { t: 151387.1650432s }
    at simulator_dedicated_server\src\connection\connection.rs:107 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T12:22:17.854484Z  INFO  [TEST] Received ping (auto-pong by tungstenite), ignoring.
    at simulator_dedicated_server\src\test\mod.rs:249 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854563Z  INFO  [TEST] Received ping (auto-pong by tungstenite), ignoring.
    at simulator_dedicated_server\src\test\mod.rs:249 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854609Z  INFO  ConnectionActor for player Player2 (session_id: e0159fea-dd83-4966-974a-6da069c0e3aa): Received Pong from client
    at simulator_dedicated_server\src\connection\connection.rs:254 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T12:22:17.854627Z  INFO  ConnectionActor for player Player2 (session_id: e0159fea-dd83-4966-974a-6da069c0e3aa): Initial Pong received. Registering with GameActor.
    at simulator_dedicated_server\src\connection\connection.rs:262 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T12:22:17.854632Z  INFO  ConnectionActor for player Player1 (session_id: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9): Received Pong from client
    at simulator_dedicated_server\src\connection\connection.rs:254 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T12:22:17.854642Z  INFO  ConnectionActor for player Player1 (session_id: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9): Initial Pong received. Registering with GameActor.
    at simulator_dedicated_server\src\connection\connection.rs:262 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T12:22:17.854684Z  INFO  GAME ACTOR [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Handling RegisterConnection for player e0159fea-dd83-4966-974a-6da069c0e3aa
    at simulator_core\src\game\msg\connection.rs:38 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854713Z  INFO  GAME ACTOR [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Handling RegisterConnection for player ce7ac098-b8b1-40c6-9ed7-ecffb17257e9
    at simulator_core\src\game\msg\connection.rs:38 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854757Z  INFO  GAME ACTOR [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Connection for player e0159fea-dd83-4966-974a-6da069c0e3aa registered successfully. Total connections: 1
    at simulator_core\src\game\msg\connection.rs:82 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854766Z  INFO  GAME ACTOR [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Game state locked for player e0159fea-dd83-4966-974a-6da069c0e3aa
    at simulator_core\src\game\msg\connection.rs:93 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854774Z  INFO  Player Player2 added to game state as Connected
    at simulator_core\src\game\state.rs:83 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854782Z  INFO  GAME ACTOR [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Player e0159fea-dd83-4966-974a-6da069c0e3aa connection status updated in GameStateManager.
    at simulator_core\src\game\msg\connection.rs:99 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854792Z  INFO  GAME ACTOR [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Player e0159fea-dd83-4966-974a-6da069c0e3aa connected, but not all players are ready. Waiting for others.
    at simulator_core\src\game\msg\connection.rs:213 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854817Z  INFO  GAME ACTOR [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Connection for player ce7ac098-b8b1-40c6-9ed7-ecffb17257e9 registered successfully. Total connections: 2
    at simulator_core\src\game\msg\connection.rs:82 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854822Z  INFO  GAME ACTOR [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Game state locked for player ce7ac098-b8b1-40c6-9ed7-ecffb17257e9
    at simulator_core\src\game\msg\connection.rs:93 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854825Z  INFO  Player Player1 added to game state as Connected
    at simulator_core\src\game\state.rs:83 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854832Z  INFO  Game phase transitioning from Initial to Mulligan
    at simulator_core\src\game\state.rs:147 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854836Z  INFO  GAME ACTOR [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Player ce7ac098-b8b1-40c6-9ed7-ecffb17257e9 connection status updated in GameStateManager.
    at simulator_core\src\game\msg\connection.rs:99 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854841Z  INFO  GAME ACTOR [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Proceeding with Mulligan card distribution.
    at simulator_core\src\game\msg\connection.rs:149 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854840Z  INFO  ConnectionActor for player Player2 (session_id: e0159fea-dd83-4966-974a-6da069c0e3aa): Successfully registered with GameActor.
    at simulator_dedicated_server\src\connection\connection.rs:318 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T12:22:17.854854Z  INFO  Starting opponent wait timer for first player: Player1
    at simulator_core\src\game\msg\connection.rs:238 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854875Z  INFO  PLAYER ACTOR [Player1]: Handling GetMulliganDealCards
    at simulator_core\src\player\message.rs:104 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.854976Z  INFO  Received SendMulliganDealCards event, sending directly to client for player: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9
    at simulator_dedicated_server\src\connection\messages.rs:63 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T12:22:17.855052Z  INFO  Successfully sent Mulligan deal cards directly to player: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9
    at simulator_dedicated_server\src\connection\messages.rs:85 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T12:22:17.855056Z  INFO  Sent mulligan cards (5 count) to player ce7ac098-b8b1-40c6-9ed7-ecffb17257e9
    at simulator_core\src\game\msg\connection.rs:187 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.855066Z  INFO  Player Player1 mulligan status updated from NotStarted to CardsDealt
    at simulator_core\src\game\state.rs:174 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.855086Z  INFO  PLAYER ACTOR [Player2]: Handling GetMulliganDealCards
    at simulator_core\src\player\message.rs:104 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.855142Z  INFO  Received SendMulliganDealCards event, sending directly to client for player: e0159fea-dd83-4966-974a-6da069c0e3aa
    at simulator_dedicated_server\src\connection\messages.rs:63 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T12:22:17.855156Z  INFO  [TEST] Received message: {"cards":["8336a13e-a27a-4a87-ae81-8dd7a5f4fe28","b8490289-cb17-4056-9ec4-1f4955f0c7d5","6ee58bc7-69c9-414b-841b-96edd126c44b","24333be2-f5cd-46b1-8707-a143dda94b04","4bb7e590-52a0-422d-8c84-e76d49bc6ae0"],"player":"Player1","type":"mulligan_deal"}
    at simulator_dedicated_server\src\test\mod.rs:239 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.855215Z  INFO  Successfully sent Mulligan deal cards directly to player: e0159fea-dd83-4966-974a-6da069c0e3aa
    at simulator_dedicated_server\src\connection\messages.rs:85 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T12:22:17.855413Z  INFO  PLAYER ACTOR [Player1]: Handling GetDeckCards
    at simulator_core\src\player\message.rs:220 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.855482Z  INFO  Sent mulligan cards (5 count) to player e0159fea-dd83-4966-974a-6da069c0e3aa
    at simulator_core\src\game\msg\connection.rs:187 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.855491Z  INFO  Player Player2 mulligan status updated from NotStarted to CardsDealt
    at simulator_core\src\game\state.rs:174 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.855520Z  INFO  [TEST] Received message: {"cards":["e3f92aa5-0bf2-4bc8-abe6-f44791f75d48","40c62cd0-5e8f-4896-a819-42511758bd24","e7827728-c8e9-4844-8ddc-26d1663ad62a","3d10b79e-0336-4dad-b736-be425dd37d6d","7c4d38b8-1c39-4e49-ac23-2075b9cddd03"],"player":"Player2","type":"mulligan_deal"}
    at simulator_dedicated_server\src\test\mod.rs:239 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.855534Z  INFO  ConnectionActor for player Player1 (session_id: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9): Successfully registered with GameActor.
    at simulator_dedicated_server\src\connection\connection.rs:318 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T12:22:17.855848Z  INFO  PLAYER ACTOR [Player2]: Handling GetDeckCards
    at simulator_core\src\player\message.rs:220 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.856225Z  INFO  GameActor [405c7b6d-4aab-4329-b3d8-1f3486e8d73b] is stopping. Initiating comprehensive cleanup.
    at simulator_core\src\game\mod.rs:70 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.856249Z  INFO  GameActor [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: stopping() method finished, comprehensive cleanup scheduled.
    at simulator_core\src\game\mod.rs:152 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.856268Z  INFO  GameActor [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Starting comprehensive cleanup task.
    at simulator_core\src\game\mod.rs:82 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.856283Z  INFO  Player Player2 removed from game state
    at simulator_core\src\game\state.rs:90 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.856288Z  INFO  Player Player1 removed from game state
    at simulator_core\src\game\state.rs:90 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.856292Z  INFO  GameActor [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: All players removed from GameStateManager.
    at simulator_core\src\game\mod.rs:94 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.856309Z  INFO  GameActor [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: All connections cleared.
    at simulator_core\src\game\mod.rs:104 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.856318Z  INFO  GameActor [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Preparing to send GameOver to PlayerActor (Addr { tx: AddressSender { sender_task: Mutex { data: SenderTask { task: None, is_parked: false } }, maybe_parked: false } }).
    at simulator_core\src\game\mod.rs:113 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.856332Z  INFO  ConnectionActor for player Player1 (session_id: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9): WebSocket stream finished. Stopping actor.
    at simulator_dedicated_server\src\connection\connection.rs:388 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T12:22:17.856331Z  INFO  ConnectionActor for player Player2 (session_id: e0159fea-dd83-4966-974a-6da069c0e3aa): WebSocket stream finished. Stopping actor.
    at simulator_dedicated_server\src\connection\connection.rs:388 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T12:22:17.856339Z  INFO  GameActor [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Preparing to send GameOver to PlayerActor (Addr { tx: AddressSender { sender_task: Mutex { data: SenderTask { task: None, is_parked: false } }, maybe_parked: false } }).
    at simulator_core\src\game\mod.rs:113 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.856355Z  WARN  GameActor [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Failed to send GameOver to PlayerActor (Addr { tx: AddressSender { sender_task: Mutex { data: SenderTask { task: None, is_parked: false } }, maybe_parked: false } }): MailboxError(Mailbox has closed). Attempting Terminate.
    at simulator_core\src\game\mod.rs:122 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.856361Z  INFO  ConnectionActor stopping for player Player1 (session_id: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9)
    at simulator_dedicated_server\src\connection\connection.rs:183 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T12:22:17.856362Z  WARN  GameActor [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Failed to send GameOver to PlayerActor (Addr { tx: AddressSender { sender_task: Mutex { data: SenderTask { task: None, is_parked: false } }, maybe_parked: false } }): MailboxError(Mailbox has closed). Attempting Terminate.
    at simulator_core\src\game\mod.rs:122 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.856369Z  INFO  Heartbeat task cancelled for player Player1 (session_id: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9)
    at simulator_dedicated_server\src\connection\connection.rs:190 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T12:22:17.856370Z  INFO  GameActor [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: Comprehensive cleanup task completed.
    at simulator_core\src\game\mod.rs:134 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.856375Z  INFO  GameActor [405c7b6d-4aab-4329-b3d8-1f3486e8d73b]: All cleanup completed.
    at simulator_core\src\game\mod.rs:142 on mulligan::test_mulligan_deal_cards_on_simultaneous_connection_with_barrier ThreadId(3)

  2025-06-10T12:22:17.856371Z  INFO  ConnectionActor stopping for player Player2 (session_id: e0159fea-dd83-4966-974a-6da069c0e3aa)
    at simulator_dedicated_server\src\connection\connection.rs:183 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T12:22:17.856386Z  INFO  Heartbeat task cancelled for player Player2 (session_id: e0159fea-dd83-4966-974a-6da069c0e3aa)
    at simulator_dedicated_server\src\connection\connection.rs:190 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T12:22:17.856386Z  INFO  ConnectionActor stopping for player Player1 (session_id: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9)
    at simulator_dedicated_server\src\connection\connection.rs:183 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T12:22:17.856394Z  WARN  No heartbeat task to cancel for player Player1 (session_id: ce7ac098-b8b1-40c6-9ed7-ecffb17257e9)
    at simulator_dedicated_server\src\connection\connection.rs:195 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T12:22:17.856403Z  INFO  ConnectionActor stopping for player Player2 (session_id: e0159fea-dd83-4966-974a-6da069c0e3aa)
    at simulator_dedicated_server\src\connection\connection.rs:183 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T12:22:17.856407Z  WARN  No heartbeat task to cancel for player Player2 (session_id: e0159fea-dd83-4966-974a-6da069c0e3aa)
    at simulator_dedicated_server\src\connection\connection.rs:195 on actix-rt|system:0|arbiter:0 ThreadId(4)

  2025-06-10T12:22:17.856408Z  INFO  Session cleanup task completed: player=Player1, session_id=ce7ac098-b8b1-40c6-9ed7-ecffb17257e9
    at simulator_dedicated_server\src\connection\connection.rs:135 on actix-rt|system:0|arbiter:1 ThreadId(5)

  2025-06-10T12:22:17.856418Z  INFO  Session cleanup task completed: player=Player2, session_id=e0159fea-dd83-4966-974a-6da069c0e3aa
    at simulator_dedicated_server\src\connection\connection.rs:135 on actix-rt|system:0|arbiter:0 ThreadId(4)

